webpackJsonp([1],{"/Kj+":function(e,t){},"0nQ+":function(e,t){},"8Uyj":function(e,t){},"BHF+":function(e,t){},FAfc:function(e,t){},K0Qg:function(e,t){},MTXk:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("IvJb"),n={name:"app",data:()=>({transition:"slide-left"}),mounted(){},watch:{}},s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var r=a("C7Lr")(n,s,!1,function(e){a("BHF+")},null,null).exports,i=a("aozt"),l=a.n(i),d=a("zO6J"),c={name:"sidebar",data:()=>({userinfo:[],username:"",nav:[{title:"控制台",icon:"ios-speedometer",path:"/"},{title:"用户列表",icon:"md-people",path:"/member"},{title:"卡密列表",icon:"md-git-branch",path:"/code"},{title:"手机界面",icon:"ios-apps",path:"/mobile"},{title:"套餐列表",icon:"md-finger-print",path:"/vip"},{title:"资金日志",icon:"ios-apps",path:"/money"},{title:"系统设置",icon:"ios-cog",path:"/setting"}],navIndex:0}),mounted(){this.setNav(),this.user(),"/dashboard"==this.$route.path?this.navIndex=0:this.setNav()},methods:{user(){let e=JSON.parse(sessionStorage.getItem("userInfo"));this.username=e?e.name:"未知"},setNav(){this.navIndex=this.nav.findIndex(e=>e.path===this.$route.path)},routerLink(e,t){this.navIndex=e,this.$router.push(t)}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sidebar animated"},[a("ul",[a("li",[a("Avatar",{attrs:{icon:"ios-person",size:"large"}}),e._v(" "),a("p",[e._v("您好!")]),e._v(" "),a("p",[e._v(e._s(e.username))])],1),e._v(" "),e._l(e.nav,function(t,o){return a("li",{key:o,on:{click:function(a){e.routerLink(o,t.path)}}},[a("div",{class:e.navIndex==o?"item-active":e.navIndex==o},[a("i",{class:t.icon}),e._v(" "),a("Icon",{attrs:{type:t.icon}}),e._v(" "),a("p",[e._v(" "+e._s(t.title))])],1)])})],2)])},staticRenderFns:[]};var u={data:()=>({}),components:{sidebar:a("C7Lr")(c,m,!1,function(e){a("MTXk")},null,null).exports},methods:{}},p={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"wrapper"},[t("sidebar"),this._v(" "),t("div",{staticClass:"content"},[t("router-view")],1)],1)},staticRenderFns:[]};var g=a("C7Lr")(u,p,!1,function(e){a("/Kj+")},null,null).exports,h={name:"App",data:()=>({formCustom:{username:"",pwd:""},ruleCustom:{username:[{validator:(e,t,a)=>{""===t?a(new Error("请输入登录账号")):a()},trigger:"blur"}],pwd:[{validator:(e,t,a)=>{""===t?a(new Error("请输入登录密码")):a()},trigger:"blur"}]}}),mounted(){},methods:{login(e){let t=this;this.$refs[e].validate(e=>{e?t.axios.post("/login",{email:t.formCustom.username,password:t.formCustom.pwd}).then(function(e){let a=e.data;2!=!e.token&&e.user||(t.$router.push({path:"/"}),sessionStorage.setItem("token",JSON.stringify(a.token)),sessionStorage.setItem("userInfo",JSON.stringify(a.user)))}).catch(function(e){console.log(e),t.$Message.error("校验失败，请重新填写!"),sessionStorage.removeItem("userInfo")}):t.$Message.error("校验失败，请重新填写!")})}},mounted(){}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sign"},[a("div",{staticClass:"login animated"},[a("Form",{ref:"formCustom",attrs:{model:e.formCustom,rules:e.ruleCustom}},[a("FormItem",{attrs:{prop:"username"}},[a("Input",{attrs:{type:"text",clearable:"",min:"1",placeholder:"请输入登录账号"},model:{value:e.formCustom.username,callback:function(t){e.$set(e.formCustom,"username",t)},expression:"formCustom.username"}},[a("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),e._v(" "),a("FormItem",{attrs:{prop:"pwd"}},[a("Input",{attrs:{type:"password",clearable:"",placeholder:"请输入登录密码"},model:{value:e.formCustom.pwd,callback:function(t){e.$set(e.formCustom,"pwd",t)},expression:"formCustom.pwd"}},[a("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"})],1)],1),e._v(" "),a("FormItem",{staticClass:"submit"},[a("Button",{attrs:{type:"primary",long:""},on:{click:function(t){e.login("formCustom")}}},[e._v("登录系统")])],1)],1)],1)])},staticRenderFns:[]};var b=a("C7Lr")(h,f,!1,function(e){a("OxVs")},null,null).exports,v={name:"dashboard",data:()=>({loading:!0,pwdModal:!1,users:[{id:"loading",name:"loading",email:"loading",point:"loading",money:"loading",qq:"loading",discount:"loading",website:"loading"}],formCustom:{newPassword:"",originalPassword:""},ruleCustom:{originalPassword:[{validator:(e,t,a)=>{""===t&&a(new Error("请输入您的旧密码")),a()},trigger:"blur"}],newPassword:[{validator:(e,t,a)=>{""===t&&a(new Error("请输入您的新密码")),a()},trigger:"blur"}]},webcol:[{title:"#",type:"index",width:60,align:"center"},{title:"网站名称",key:"name",align:"center"},{title:"链接地址",key:"url",align:"center"},{title:"状态",key:"isopen",align:"center",render:(e,t)=>e("span",{domProps:{innerHTML:1==t.row.isopen?"正常":'<span style="color:red">关闭</span>'}})}],webdata:[],data:[],page:[{pagenumber:10,pageTotal:0}],infos:[{packageCalculateType:"",packageDurationType:"",price:"",websiteIds:"",availableTimesList:""}]}),mounted(){this.user(),this.weblist(1)},methods:{handlePage(e){this.page.pagenumber=e,this.weblist(this.page.pagenumber)},weblist(e){let t=this;t.axios.get("/setting/sitepage",{params:{page:e,num:10}}).then(function(e){let a=e.data;0==a.code&&(t.webdata=a.data.data,t.page.pageTotal=a.data.total,t.loading=!1)}).catch(function(e){})},handleSubmit(e){let t=this;t.$refs[e].validate(e=>{e&&(console.log(t.users.id),t.axios.post("/admins/chgpwd",{id:t.users.id,oldpwd:t.formCustom.originalPassword,newpwd:t.formCustom.newPassword}).then(function(e){let a=e.data;console.log(a),200==e.status&&0==a.code?(t.$Message.success("操作成功！"),t.codeModal=!1,t.logout()):(a.code=-1)&&t.$Message.error(a.message)}).catch(function(e){t.$Message.error("校验失败，请重新填写!")}))})},handleReset(e){this.$refs[e].resetFields()},logout(){this.axios.get("/logout",{}).then(function(e){(e.status=200)&&(sessionStorage.removeItem("token"),sessionStorage.removeItem("userInfo"))}).catch(function(e){}),this.$router.push({path:"/login"})},user(){let e=JSON.parse(sessionStorage.getItem("userInfo"));e&&(this.users=e)}}},w={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard animated"},[a("Card",{staticClass:"info",attrs:{type:"card"}},[a("ul",[a("li",[e._v("用户昵称："+e._s(e.users.name))]),e._v(" "),a("li",[e._v("登录账号："+e._s(e.users.email))]),e._v(" "),a("li",[e._v("账户余额："+e._s(e.users.money))]),e._v(" "),a("li",[e._v("联系方式："+e._s(e.users.qq))]),e._v(" "),a("li",[e._v("提卡折扣："+e._s(e.users.discount)+"%")]),e._v(" "),a("li",[e._v("绑定域名："+e._s(e.users.website))])])]),e._v(" "),a("Card",[a("Table",{ref:"selection",attrs:{border:"",columns:e.webcol,data:e.webdata,loading:e.loading,size:"small",height:"440px"}}),e._v(" "),a("Page",{staticClass:"page",attrs:{total:e.page.pageTotal,"show-total":"",placement:"top"},on:{"on-change":e.handlePage}})],1),e._v(" "),a("Button",{attrs:{type:"primary",long:""},on:{click:function(t){e.logout()}}},[e._v("退出登录")]),e._v(" "),a("Button",{attrs:{type:"dashed",long:""},on:{click:function(t){e.pwdModal=!0}}},[e._v("修改密码")]),e._v(" "),a("Modal",{attrs:{title:"修改密码",loading:e.loading,width:"420","footer-hide":""},model:{value:e.pwdModal,callback:function(t){e.pwdModal=t},expression:"pwdModal"}},[a("Form",{ref:"formCustom",attrs:{model:e.formCustom,rules:e.ruleCustom}},[a("FormItem",{attrs:{prop:"originalPassword"}},[a("Input",{attrs:{type:"password",clearable:""},model:{value:e.formCustom.originalPassword,callback:function(t){e.$set(e.formCustom,"originalPassword",t)},expression:"formCustom.originalPassword"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("旧密码")])])],1),e._v(" "),a("FormItem",{attrs:{prop:"newPassword"}},[a("Input",{attrs:{type:"password",clearable:""},model:{value:e.formCustom.newPassword,callback:function(t){e.$set(e.formCustom,"newPassword",t)},expression:"formCustom.newPassword"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("新密码")])])],1),e._v(" "),a("FormItem",[a("Button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary",long:""},on:{click:function(t){e.handleSubmit("formCustom")}}},[e._v("提交修改")]),e._v(" "),a("Button",{attrs:{long:""},on:{click:function(t){e.handleReset("formCustom")}}},[e._v("重新填写")])],1)],1)],1)],1)},staticRenderFns:[]};var _=a("C7Lr")(v,w,!1,function(e){a("8Uyj")},null,null).exports,y={data(){return{agentModal:!1,loading:!0,open:[{value:0,label:"关闭账号"},{value:1,label:"启用账号"}],page:[{pageTotal:0,number:1}],formValidate:{id:"",name:"",email:"",password:"123456",qq:"",website:"",api_address:"",discount:"100",isopen:"1"},ruleCustom:{name:[{required:!0,message:"请填写代理昵称",trigger:"blur"}],email:[{required:!0,message:"请填写登录代理账号",trigger:"blur"}],password:[{required:!0,message:"请填写代理登录密码",trigger:"blur"}],qq:[{required:!0,message:"请填写联系方式",trigger:"blur"}],website:[{required:!0,message:"请填写代理的前端网站",trigger:"blur"}],api_address:[{required:!0,message:"请填写服务器接口地址",trigger:"blur"}],discount:[{required:!0,message:"请填写代理的折扣率",trigger:"blur"}]},data:[],agentId:"",columns:[{title:"#",type:"index",width:80,align:"center"},{title:"昵称",key:"name",align:"center",width:120,align:"center"},{title:"状态",key:"isopen",align:"center",width:80,render:(e,t)=>e("span",{domProps:{innerHTML:1==t.row.isopen?"正常":'<span style="color:red">停用</span>'}})},{title:"登录账号",key:"email",align:"center",width:150},{title:"可用余额",key:"money",align:"center",width:100},{title:"QQ",key:"qq",align:"center",width:150},{title:"绑定网站",key:"website",align:"center",width:300},{title:"接口地址",key:"api_address",align:"center",width:300},{title:"添加时间",key:"created_at",align:"center",width:170},{title:"更新时间",key:"updated_at",align:"center",width:170},{title:"折扣",key:"discount",align:"center",width:80,render:(e,t)=>e("span",{domProps:{innerHTML:t.row.discount+"%"}})},{title:"操作",key:"action",align:"center",fixed:"right",width:120,render:(e,t)=>e("div",[e("Button",{props:{type:"text",size:"small"},on:{click:()=>{this.agentModal=!0,this.edit(t.index)}}},"编辑信息")])}]}},mounted(){this.agentlist()},methods:{handlePage(e){this.page.pagenumber=e,this.weblist(this.page.pagenumber)},edit(e){let t=this,a=t.data[e].isopen;t.formValidate.id=t.data[e].id,t.formValidate.name=t.data[e].name,t.formValidate.email=t.data[e].email,t.formValidate.qq=t.data[e].qq,t.formValidate.website=t.data[e].website,t.formValidate.api_address=t.data[e].api_address,t.formValidate.discount=t.data[e].discount,t.formValidate.isopen=a.toString()},agentlist(){let e=this;e.axios.get("/admins/agents",{params:{page:1,num:10}}).then(function(t){200==t.status&&0==t.data.code&&(e.data=t.data.data,e.loading=!1,console.log(e.data))}).catch(function(e){})},agent(){let e=this;e.axios.post("/admins/store",{id:e.formValidate.id,name:e.formValidate.name,email:e.formValidate.email,qq:e.formValidate.qq,password:e.formValidate.password,website:e.formValidate.website,api_address:e.formValidate.api_address,discount:e.formValidate.discount,isopen:e.formValidate.isopen}).then(function(t){200==t.status&&0==t.data.code&&(e.$Message.success("代理操作成功!"),e.agentlist(),e.handleReset("formValidate"),e.agentModal=!1)}).catch(function(e){console.log(e)})},handleSubmit(e){this.$refs[e].validate(e=>{e&&this.agent()})},handleReset(e){this.$refs[e].resetFields()}}},x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"agent animated"},[a("Row",[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("\n                代理列表\n            ")]),e._v(" "),a("Table",{ref:"selection",attrs:{border:"",columns:e.columns,data:e.data,loading:e.loading,height:"525px"}}),e._v(" "),a("div",{staticClass:"btn-group"},[a("Button",{attrs:{type:"dashed"},on:{click:function(t){e.agentModal=!0}}},[e._v("添加代理账户")])],1),e._v(" "),a("Divider"),e._v(" "),a("Page",{staticClass:"page",attrs:{total:e.page.pageTotal,"show-total":"",placement:"top"},on:{"on-change":e.handlePage}})],1),e._v(" "),a("Modal",{attrs:{title:"添加代理",loading:e.loading,width:"450px","footer-hide":"",styles:{top:"20px"}},model:{value:e.agentModal,callback:function(t){e.agentModal=t},expression:"agentModal"}},[a("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleCustom,"label-width":80}},[a("FormItem",{attrs:{label:"用户昵称",prop:"name"}},[a("Input",{model:{value:e.formValidate.name,callback:function(t){e.$set(e.formValidate,"name",t)},expression:"formValidate.name"}})],1),e._v(" "),a("FormItem",{attrs:{label:"登录账号",prop:"email"}},[a("Input",{model:{value:e.formValidate.email,callback:function(t){e.$set(e.formValidate,"email",t)},expression:"formValidate.email"}})],1),e._v(" "),a("FormItem",{attrs:{label:"登录密码",prop:"password"}},[a("Input",{model:{value:e.formValidate.password,callback:function(t){e.$set(e.formValidate,"password",t)},expression:"formValidate.password"}})],1),e._v(" "),a("FormItem",{attrs:{label:"联系QQ",prop:"qq"}},[a("Input",{model:{value:e.formValidate.qq,callback:function(t){e.$set(e.formValidate,"qq",t)},expression:"formValidate.qq"}})],1),e._v(" "),a("FormItem",{attrs:{label:"网站地址",prop:"website"}},[a("Input",{model:{value:e.formValidate.website,callback:function(t){e.$set(e.formValidate,"website",t)},expression:"formValidate.website"}})],1),e._v(" "),a("FormItem",{attrs:{label:"接口地址",prop:"api_address"}},[a("Input",{model:{value:e.formValidate.api_address,callback:function(t){e.$set(e.formValidate,"api_address",t)},expression:"formValidate.api_address"}})],1),e._v(" "),a("FormItem",{attrs:{label:"代理折扣",prop:"discount"}},[a("Input",{model:{value:e.formValidate.discount,callback:function(t){e.$set(e.formValidate,"discount",t)},expression:"formValidate.discount"}})],1),e._v(" "),a("FormItem",{attrs:{label:"是否启用"}},[a("RadioGroup",{model:{value:e.formValidate.isopen,callback:function(t){e.$set(e.formValidate,"isopen",t)},expression:"formValidate.isopen"}},[a("Radio",{attrs:{label:"1"}},[e._v("开通")]),e._v(" "),a("Radio",{attrs:{label:"0"}},[e._v("关闭")])],1)],1),e._v(" "),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleSubmit("formValidate")}}},[e._v("确认提交")]),e._v(" "),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){e.handleReset("formValidate")}}},[e._v("重新填写")])],1)],1)],1)],1)],1)},staticRenderFns:[]};a("C7Lr")(y,x,!1,function(e){a("j7PF")},null,null).exports;var k={data(){return{data:[],loading:!0,page:[{pageTotal:0,number:1}],columns:[{title:"#",type:"index",width:70,align:"center"},{title:"套餐名称",key:"name",align:"center",width:230},{title:"使用类型",key:"type",align:"center",render:(e,t)=>e("span",{domProps:{innerHTML:"day"==t.row.type?"按天扣点":"按次扣点"},class:{"btn-group":!0}})},{title:"可用网站",key:"id",align:"center",render:(e,t)=>e("Poptip",{props:{trigger:"hover",title:"套餐共"+t.row.websites.length+"个网站",placement:"right"},style:{fontSize:"12px",cursor:"pointer"}},[e("span","共"+t.row.websites.length+"个网站"),e("div",{slot:"content"},[e("ul",this.data[t.index].websites.map(t=>e("li",{style:{textAlign:"center",padding:"4px",fontSize:"12px"}},t.name+t.pivot.count+"次每天")))])])},{title:"使用时长",key:"timelong",align:"center",render:(e,t)=>e("span",{domProps:{innerHTML:this.days(t.row.timelong)},class:{"btn-group":!0}})},{title:"价格",align:"center",key:"price"},{title:"状态",align:"center",key:"isopen",render:(e,t)=>e("span",{domProps:{innerHTML:1==t.row.isopen?"使用中":'<span style="color:red">已停用</span>'},class:{"btn-group":!0}})}]}},mounted(){this.combolist(1)},methods:{handlePage(e){this.page.pagenumber=e,this.combolist(this.page.pagenumber)},days:e=>0==e?"终身卡":1==e?"体验卡":30==e?"月卡":365==e?"年卡":"天卡",combolist(e){let t=this;t.axios.get("/setting/combopage",{params:{page:e,num:10}}).then(function(e){let a=e.data;0==a.code&&(t.data=a.data.data,t.page.pageTotal=a.data.total,t.loading=!1)}).catch(function(e){})}}},I={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vip animated"},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("\n            套餐列表\n        ")]),e._v(" "),a("Table",{ref:"selection",attrs:{border:"",columns:e.columns,data:e.data,height:"525",loading:e.loading}}),e._v(" "),a("Page",{staticClass:"page",attrs:{total:e.page.pageTotal,"show-total":"",placement:"top"},on:{"on-change":e.handlePage}})],1)],1)},staticRenderFns:[]};var V=a("C7Lr")(k,I,!1,function(e){a("zj8O")},null,null).exports,M={mounted(){this.members(1)},methods:{handleSelectAll(e){this.$refs.selection.selectAll(e)},handlePage(e){this.page.pagenumber=e,this.getcode(this.page.pagenumber)},search(){this.members(1)},stop(e){let t="";for(var a=0;a<e.length;a++)t=t?t+","+e[a].id:e[a].id;this.memberdata=t},batchfreeze(){let e=this;""!==this.memberdata?e.axios.post("member/batchfreeze",{idstring:e.memberdata}).then(function(t){let a=t.data;"200"==t.status&&"0"==a.code&&(e.$Message.success("批量冻结账号成功!"),e.members(1))}).catch(function(e){}):e.$Message.error("请先选择勾选要冻结的会员再提交!")},batchopen(){let e=this;""!==this.memberdata?e.axios.post("member/batchopen",{idstring:e.memberdata}).then(function(t){let a=t.data;"200"==t.status&&"0"==a.code&&(e.$Message.success("批量启用账号成功!"),e.members(1))}).catch(function(e){}):e.$Message.error("请先选择勾选要启用的会员再提交!")},repwd(e){let t=this;t.axios.post("member/resetpwd",{idstring:e}).then(function(e){let a=e.data;"200"==e.status&&"0"==a.code&&(t.$Message.success("重置密码成功!"),t.members(1))}).catch(function(e){})},memberinfo(e){this.info=e,this.memberModal=!0},members(e,t){let a=this;a.axios.get("/member/lists",{params:{uid:a.formInline.uid,search:a.formInline.name,page:e,num:10}}).then(function(e){let t=e.data;200==e.status&&0==t.code&&(a.page.pageTotal=t.data.total,a.data=t.data.data,a.loading=!1)}).catch(function(e){a.$Message.error("校验失败，请重新填写!"),sessionStorage.removeItem("userInfo")})}},data(){return{loading:!0,memberdata:"",memberModal:!1,info:[],time:[{begin:"-",end:"-"}],formInline:{name:"",uid:""},ruleInline:{name:[{required:!0,message:"用户名不能为空",trigger:"blur"}]},combo:[],data:[],page:[{pageTotal:0,pageNum:1,pageSize:10,agentId:""}],columns:[{type:"selection",width:50,align:"center",fixed:"left"},{title:"#",type:"index",width:55,align:"center"},{title:"会员账号",key:"mobile",width:150,align:"center"},{title:"注册时间",key:"created_at",width:200,align:"center"},{title:"最后登录",key:"last_login_time",width:200,align:"center",render:(e,t)=>e("span",{domProps:{innerHTML:null!==t.row.last_login_time?t.row.last_login_time:"-"},class:{"btn-group":!0}})},{title:"账号状态",key:"isopen",width:100,align:"center",render:(e,t)=>e("span",{domProps:{innerHTML:0==t.row.isopen?'<span style="color:red">已冻结</span>':"使用中"},class:{"btn-group":!0}})},{title:"操作",key:"action",align:"center",render:(e,t)=>e("div",[e("Button",{props:{type:"text",size:"small"},on:{click:()=>{this.repwd(t.row.id)}}},"重置密码"),e("Button",{props:{type:"text",size:"small"},on:{click:()=>{this.time.begin=t.row.begin,this.time.end=t.row.end,this.memberinfo(t.row.combo)}}},"会员详情")])}]}}},$={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"member animated"},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("\n            我的会员\n        ")]),e._v(" "),a("Form",{ref:"formInline",staticStyle:{"margin-top":"20px"},attrs:{model:e.formInline,rules:e.ruleInline,inline:""}},[a("FormItem",{staticStyle:{width:"200px"},attrs:{prop:"name"}},[a("Input",{attrs:{type:"text",placeholder:"请输入会员账号",clearable:""},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),e._v(" "),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索用户")])],1)],1),e._v(" "),a("Table",{ref:"selection",attrs:{border:"",columns:e.columns,data:e.data,height:"520px",loading:e.loading,"highlight-row":""},on:{"on-selection-change":e.stop}}),e._v(" "),a("div",{staticClass:"btn-group"},[a("Button",{attrs:{type:"dashed"},on:{click:function(t){e.handleSelectAll(!0)}}},[e._v("选取所有")]),e._v(" "),a("Button",{attrs:{type:"dashed"},on:{click:e.batchfreeze}},[e._v("批量冻结")]),e._v(" "),a("Button",{attrs:{type:"dashed"},on:{click:e.batchopen}},[e._v("批量启用")])],1),e._v(" "),a("Divider"),e._v(" "),a("Page",{staticClass:"page",attrs:{total:e.page.pageTotal,current:e.page.pageNum,"page-size":e.page.pageSize,"show-total":"",placement:"top"}})],1),e._v(" "),a("Modal",{attrs:{title:"会员套餐详情",loading:e.loading,"footer-hide":"",width:"380px"},model:{value:e.memberModal,callback:function(t){e.memberModal=t},expression:"memberModal"}},[a("ul",{staticClass:"userinfo"},[a("li",[e._v("会员套餐："+e._s(e.info.name))]),e._v(" "),a("li",[e._v("使用时长："+e._s(e.info.timelong)+"天")]),e._v(" "),a("li",[e._v("扣费方式："+e._s("count"==e.info.type?"按次扣点":"按天扣点"))]),e._v(" "),a("li",[e._v("激活时间："+e._s(e.time.begin))]),e._v(" "),a("li",[e._v("到期时间："+e._s(e.time.end))])])])],1)},staticRenderFns:[]};var C=a("C7Lr")(M,$,!1,function(e){a("NsHS")},null,null).exports,F=a("/dSo"),P=a.n(F);new P.a(".copy");var S={mounted(){this.combo(),this.getcode(1)},methods:{copy(e){let t=this,a=e,o=new P.a(".copy",{text:function(){return a}});o.on("success",e=>{t.$Notice.success({title:"充值卡:"+a.substring(18)+"...复制成功！"}),o.destroy()}),o.on("error",e=>{t.$Notice.success({title:"该浏览器不支持自动复制"}),o.destroy()})},getcode(e){let t=this;t.axios.get("/setting/pwdlist",{params:{page:e,num:10}}).then(function(e){let a=e.data;200==e.status&&0==a.code&&(t.page.pageTotal=a.data.total,t.codedata=a.data.data,t.loading=!1)}).catch(function(e){})},search(){let e=this;e.axios.get("/setting/pwdlist",{params:{search:e.code,page:1,num:10}}).then(function(t){let a=t.data;200==t.status&&0==a.code&&(e.page.pageTotal=a.data.total,e.codedata=a.data.data,e.loading=!1)}).catch(function(e){})},handleSelectAll(e){this.$refs.selection.selectAll(e)},handlePage(e){this.page.pagenumber=e,this.getcode(this.page.pagenumber)},dongjie(){let e=this;""!==this.frozendata?e.axios.post("/setting/pwdfreeze",{idstring:e.frozendata}).then(function(t){let a=t.data;"200"==t.status&&"0"==a.code&&(e.$Message.success("冻结成功!"),e.getcode())}).catch(function(e){}):e.$Message.error("请先选择要冻结的充值卡再提交!")},pwdfreeze(e){let t="";for(var a=0;a<e.length;a++)t=t?t+","+e[a].id:e[a].id;this.frozendata=t},combo(){let e=this;e.axios.get("/setting/combolist",{}).then(function(t){let a=t.data;"200"==t.status&&"0"==a.code&&(e.combolist=a.data)}).catch(function(t){e.$Message.error("校验失败，请重新填写!"),sessionStorage.removeItem("userInfo")})},setcode(){let e=this;e.axios.post("/setting/generatepwd",{num:e.formValidate.number,combo_id:e.formValidate.comboId}).then(function(t){let a=t.data;200==t.status&&0==a.code?(e.$Message.success("操作成功！"),e.codeModal=!1,e.getcode(1)):e.$Message.error(t.data.message)}).catch(function(e){sessionStorage.removeItem("userInfo")})},handleSubmit(e){this.$refs[e].validate(e=>{e&&(this.setcode(),this.handleReset("formValidate"))})},long(e){switch(parseInt(e)){case 0:return"不限制";case 1:return"体验卡";case 30:return"月卡";case 365:return"年卡";default:return e+"天"}},status:(e,t)=>0==e?'<span style="color:#ed4014">已冻结</span>':1==e&&0==t?"未使用":1==e&&1==t?'<span style="color:#ff9900">已使用</span>':void 0},data(){return{dates:"",combo_id:"",code:"",loading:!0,codeModal:!1,frozendata:"",combolist:[{id:"",name:""}],formValidate:{comboId:"1",code:""},ruleValidate:{code:[{required:!0,message:"请填写要生成的充值卡数量！",trigger:"blur"}]},codes:20,loading:!0,codedata:[],page:[{pageTotal:0,pagenumber:1,pagesize:10,agentId:""}],columns:[{type:"selection",width:50,align:"center",fixed:"left"},{title:"#",key:"id",width:70,align:"center"},{title:"套餐",key:"combo.name",width:150,align:"center",render:(e,t)=>e("span",{domProps:{innerHTML:t.row.combo.name}})},{title:"卡时长",key:"type",width:80,align:"center",render:(e,t)=>e("span",{domProps:{innerHTML:this.long(t.row.combo.timelong)}})},{title:"充值卡",key:"password",width:280,align:"center",render:(e,t)=>e("span",{domProps:{innerHTML:""!==t.row.username||1==t.row.isopen?t.row.password:"<s>"+t.row.password+"</s>"}})},{title:"使用会员",key:"username",width:150,align:"center",render:(e,t)=>e("span",{domProps:{innerHTML:""==t.row.username?"-":t.row.username}})},{title:"生成时间",key:"created_at",width:200,align:"center"},{title:"使用时间",key:"deleted_at",width:200,align:"center",render:(e,t)=>e("span",{domProps:{innerHTML:t.row.updated_at==t.row.created_at?"-":t.row.updated_at}})},{title:"状态",key:"status",width:80,align:"center",fixed:"right",render:(e,t)=>e("span",{domProps:{innerHTML:this.status(t.row.isopen,t.row.status)}})},{title:"操作",key:"code",align:"center",width:100,fixed:"right",render:(e,t)=>e("div",[e("Button",{props:{type:"text",size:"small"},class:"copy",on:{click:()=>{this.copy(t.row.password)}}},"复制卡密")])}]}}},q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"code animated"},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("\n            充值卡列表\n        ")]),e._v(" "),a("Form",{staticStyle:{"margin-top":"20px"},attrs:{inline:""}},[a("FormItem",{staticStyle:{width:"300px"},attrs:{prop:"code"}},[a("Input",{attrs:{type:"text",placeholder:"前输入要搜索的充值卡",clearable:""},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1),e._v(" "),a("FormItem",[a("Button",{on:{click:function(t){e.search()}}},[e._v("搜索充值卡")]),e._v(" "),a("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){e.codeModal=!0}}},[e._v("生成充值卡")])],1)],1),e._v(" "),a("Table",{ref:"selection",attrs:{border:"",columns:e.columns,data:e.codedata,height:"525",loading:e.loading,"highlight-row":""},on:{"on-selection-change":e.pwdfreeze}}),e._v(" "),a("div",{staticClass:"btn-group"},[a("Button",{attrs:{type:"dashed"},on:{click:function(t){e.handleSelectAll(!0)}}},[e._v("选取所有")]),e._v(" "),a("Button",{attrs:{type:"dashed",to:"txt"}},[e._v("批量导出")]),e._v(" "),a("Button",{attrs:{type:"dashed"},on:{click:e.dongjie}},[e._v("批量冻结")])],1),e._v(" "),a("Divider"),e._v(" "),a("Page",{staticClass:"page",attrs:{total:e.page.pageTotal,"show-total":"",placement:"top"},on:{"on-change":e.handlePage}})],1),e._v(" "),a("Modal",{attrs:{title:"生成卡密",loading:e.loading,width:"1000","footer-hide":""},model:{value:e.codeModal,callback:function(t){e.codeModal=t},expression:"codeModal"}},[a("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"选择套餐"}},[a("RadioGroup",{model:{value:e.formValidate.comboId,callback:function(t){e.$set(e.formValidate,"comboId",t)},expression:"formValidate.comboId"}},e._l(e.combolist,function(t,o){return 1==t.isopen?a("Radio",{key:o,staticStyle:{width:"20%",border:"1px solid #ddd",padding:"3px 8px",margin:"5px 5px 0 0"},attrs:{label:t.id}},[e._v(e._s(t.name))]):e._e()}))],1),e._v(" "),a("FormItem",{attrs:{label:"生成数量",prop:"number"}},[a("Input",{attrs:{placeholder:"请输入您要生成的充值卡数量"},model:{value:e.formValidate.number,callback:function(t){e.$set(e.formValidate,"number",t)},expression:"formValidate.number"}})],1),e._v(" "),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleSubmit("formValidate")}}},[e._v("确认生成")]),e._v(" "),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){e.handleReset("formValidate")}}},[e._v("重新填写")])],1)],1)],1)],1)},staticRenderFns:[]};var T=a("C7Lr")(S,q,!1,function(e){a("p76e")},null,null).exports;new P.a(".copy");var z={mounted(){this.combo(),this.getcode(1)},methods:{copy(e){let t=this,a=e,o=new P.a(".copy",{text:function(){return a}});o.on("success",e=>{t.$Notice.success({title:"充值卡:"+a.substring(18)+"...复制成功！"}),o.destroy()}),o.on("error",e=>{t.$Notice.success({title:"该浏览器不支持自动复制"}),o.destroy()})},getcode(e){let t=this;t.axios.get("/setting/pwdlist",{params:{page:e,num:5}}).then(function(e){let a=e.data;200==e.status&&0==a.code&&(t.page.pageTotal=a.data.total,t.codedata=a.data.data,t.loading=!1)}).catch(function(e){})},search(){let e=this;e.axios.get("/setting/pwdlist",{params:{search:e.code,page:1,num:5}}).then(function(t){let a=t.data;200==t.status&&0==a.code&&(e.page.pageTotal=a.data.total,e.codedata=a.data.data,e.loading=!1)}).catch(function(e){})},handleSelectAll(e){this.$refs.selection.selectAll(e)},handlePage(e){this.page.pagenumber=e,this.getcode(this.page.pagenumber)},dongjie(){let e=this;""!==this.frozendata?e.axios.post("/setting/pwdfreeze",{idstring:e.frozendata}).then(function(t){let a=t.data;"200"==t.status&&"0"==a.code&&(e.$Message.success("冻结成功!"),e.getcode())}).catch(function(e){}):e.$Message.error("请先选择要冻结的充值卡再提交!")},pwdfreeze(e){let t="";for(var a=0;a<e.length;a++)t=t?t+","+e[a].id:e[a].id;this.frozendata=t},combo(){let e=this;e.axios.get("/setting/combolist",{}).then(function(t){let a=t.data;"200"==t.status&&"0"==a.code&&(e.combolist=a.data)}).catch(function(t){e.$Message.error("校验失败，请重新填写!"),sessionStorage.removeItem("userInfo")})},setcode(){let e=this;e.axios.post("/setting/generatepwd",{num:e.formValidate.number,combo_id:e.formValidate.comboId}).then(function(t){let a=t.data;200==t.status&&0==a.code?(e.$Message.success("操作成功！"),e.codeModal=!1,e.getcode(1)):e.$Message.error(t.data.message)}).catch(function(e){sessionStorage.removeItem("userInfo")})},handleSubmit(e){this.$refs[e].validate(e=>{e&&(this.setcode(),this.handleReset("formValidate"))})},long(e){switch(parseInt(e)){case 0:return"不限制";case 1:return"体验卡";case 30:return"月卡";case 365:return"年卡";default:return e+"天"}},status:(e,t)=>0==e?'<span style="color:#ed4014">已冻结</span>':1==e&&0==t?"未使用":1==e&&1==t?'<span style="color:#ff9900">已使用</span>':void 0},data(){return{dates:"",combo_id:"",code:"",loading:!0,codeModal:!1,frozendata:"",combolist:[{id:"",name:""}],formValidate:{comboId:"1",code:""},ruleValidate:{code:[{required:!0,message:"请填写要生成的充值卡数量！",trigger:"blur"}]},codes:20,loading:!0,codedata:[],page:[{pageTotal:0,pagenumber:1,pagesize:10,agentId:""}],columns:[{title:"套餐",key:"combo.name",width:150,align:"center",render:(e,t)=>e("span",{domProps:{innerHTML:t.row.combo.name}})},{title:"充值卡",key:"password",width:280,align:"center",render:(e,t)=>e("span",{domProps:{innerHTML:""!==t.row.username||1==t.row.isopen?t.row.password:"<s>"+t.row.password+"</s>"}})},{title:"生成时间",key:"created_at",width:200,align:"center"},{title:"状态",key:"status",width:75,align:"center",fixed:"right",render:(e,t)=>e("span",{domProps:{innerHTML:this.status(t.row.isopen,t.row.status)}})},{title:"操作",key:"code",align:"center",width:75,fixed:"right",render:(e,t)=>e("div",[e("Button",{props:{type:"text",size:"small"},class:"copy",on:{click:()=>{this.copy(t.row.password)}}},"复制")])}]}}},L={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"code animated"},[a("Card",[a("p",{staticStyle:{"text-align":"center"},attrs:{slot:"title"},slot:"title"},[e._v("\n            充值卡列表\n        ")]),e._v(" "),a("Form",{staticStyle:{"margin-top":"20px"}},[a("FormItem",{attrs:{prop:"code"}},[a("Input",{attrs:{type:"text",placeholder:"前输入要搜索的充值卡",clearable:""},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1),e._v(" "),a("FormItem",[a("Button",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"primary",long:""},on:{click:function(t){e.codeModal=!0}}},[e._v("生成充值卡")]),e._v(" "),a("Button",{attrs:{long:""},on:{click:function(t){e.search()}}},[e._v("搜索充值卡")])],1)],1),e._v(" "),a("Table",{ref:"selection",attrs:{border:"",columns:e.columns,data:e.codedata,loading:e.loading,"highlight-row":""},on:{"on-selection-change":e.pwdfreeze}}),e._v(" "),a("br"),e._v(" "),a("Page",{staticClass:"page",attrs:{total:e.page.pageTotal,placement:"top"},on:{"on-change":e.handlePage}})],1),e._v(" "),a("Modal",{attrs:{title:"生成卡密",loading:e.loading,scrollable:"",styles:{top:"0"},"footer-hide":""},model:{value:e.codeModal,callback:function(t){e.codeModal=t},expression:"codeModal"}},[a("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-position":"top"}},[a("FormItem",[a("RadioGroup",{model:{value:e.formValidate.comboId,callback:function(t){e.$set(e.formValidate,"comboId",t)},expression:"formValidate.comboId"}},e._l(e.combolist,function(t,o){return 1==t.isopen?a("Radio",{key:o,staticStyle:{width:"100%",border:"1px solid #ddd",padding:"3px 8px",margin:"5px 5px 0 0"},attrs:{label:t.id}},[e._v(e._s(t.name)+" -- "+e._s(t.price))]):e._e()}))],1),e._v(" "),a("FormItem",{attrs:{prop:"number"}},[a("Input",{attrs:{placeholder:"请输入您要生成的充值卡数量"},model:{value:e.formValidate.number,callback:function(t){e.$set(e.formValidate,"number",t)},expression:"formValidate.number"}})],1),e._v(" "),a("FormItem",[a("Button",{attrs:{type:"primary",long:""},on:{click:function(t){e.handleSubmit("formValidate")}}},[e._v("确认生成")])],1)],1)],1)],1)},staticRenderFns:[]};var R=a("C7Lr")(z,L,!1,function(e){a("FAfc")},null,null).exports,B={mounted(){this.log(1)},methods:{handlePage(e){this.page.pageNum=e,this.log(this.page.pageNum)},log(e){let t=this;t.axios.get("/admins/cashlist",{params:{page:e,num:10}}).then(function(e){200==e.status&&0==e.data.code&&(t.data=e.data.data.data,t.page.pageTotal=e.data.data.total,t.loading=!1)}).catch(function(e){})}},data:()=>({loading:!0,data:[],page:[{pageTotal:0,number:1,pageNum:1}],columns:[{title:"#",type:"index",width:100,align:"center"},{title:"交易金额",key:"money",align:"center",render:(e,t)=>e("span",{domProps:{innerHTML:"charge"==t.row.mark?t.row.money:"-"+t.row.money}})},{title:"交易时间",key:"created_at",align:"center"},{title:"备注",key:"mark",align:"center",render:(e,t)=>e("span",{domProps:{innerHTML:"charge"==t.row.mark?"管理员余额充值":"生成充值卡扣款"}})}]})},H={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"log animated"},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("\n            资金日志\n        ")]),e._v(" "),a("Table",{ref:"selection",attrs:{border:"",columns:e.columns,data:e.data,height:"525px",loading:e.loading}}),e._v(" "),a("Page",{staticClass:"page",attrs:{total:e.page.pageTotal,"show-total":"",placement:"top"},on:{"on-change":e.handlePage}})],1)],1)},staticRenderFns:[]};var N=a("C7Lr")(B,H,!1,function(e){a("K0Qg")},null,null).exports;new P.a(".copy");var A={mounted(){this.combo(),this.getcode(1,20)},methods:{getcode(e,t){let a=this;a.axios.get("/setting/pwdlist",{params:{page:e,num:t}}).then(function(e){let t=e.data;200==e.status&&0==t.code&&(a.page.pageTotal=t.data.total,a.codedata=t.data.data,a.loading=!1)}).catch(function(e){})},search(){this.getcode(1,this.code)},handleSelectAll(e){this.$refs.selection.selectAll(e)},handlePage(e){this.page.pagenumber=e,this.getcode(this.page.pagenumber)},dongjie(){let e=this;""!==this.frozendata?e.axios.post("/setting/pwdfreeze",{idstring:e.frozendata}).then(function(t){let a=t.data;"200"==t.status&&"0"==a.code&&(e.$Message.success("冻结成功!"),e.getcode())}).catch(function(e){}):e.$Message.error("请先选择要冻结的充值卡再提交!")},pwdfreeze(e){let t="";for(var a=0;a<e.length;a++)t=t?t+","+e[a].id:e[a].id;this.frozendata=t},combo(){let e=this;e.axios.get("/setting/combolist",{}).then(function(t){let a=t.data;"200"==t.status&&"0"==a.code&&(e.combolist=a.data)}).catch(function(t){e.$Message.error("校验失败，请重新填写!"),sessionStorage.removeItem("userInfo")})},setcode(){let e=this;e.axios.post("/setting/generatepwd",{num:e.formValidate.number,combo_id:e.formValidate.comboId}).then(function(t){let a=t.data;200==t.status&&0==a.code?(e.$Message.success("操作成功！"),e.codeModal=!1,e.getcode(1)):e.$Message.error(t.data.message)}).catch(function(e){sessionStorage.removeItem("userInfo")})},handleSubmit(e){this.$refs[e].validate(e=>{e&&(this.setcode(),this.handleReset("formValidate"))})},long(e){switch(parseInt(e)){case 0:return"不限制";case 1:return"体验卡";case 30:return"月卡";case 365:return"年卡";default:return e+"天"}},status:(e,t)=>0==e?'<span style="color:#ed4014">已冻结</span>':1==e&&0==t?"未使用":1==e&&1==t?'<span style="color:#ff9900">已使用</span>':void 0},data(){return{dates:"",combo_id:"",code:"",loading:!0,codeModal:!1,frozendata:"",combolist:[{id:"",name:""}],formValidate:{comboId:"2",code:""},ruleValidate:{code:[{required:!0,message:"请填写要生成的充值卡数量！",trigger:"blur"}]},codes:20,loading:!0,codedata:[],page:[{pageTotal:0,pagesize:10,agentId:""}],columns:[{type:"selection",width:50,align:"center",fixed:"left"},{title:"#",key:"id",width:70,align:"center"},{title:"套餐",key:"combo.name",width:150,align:"center",render:(e,t)=>e("span",{domProps:{innerHTML:t.row.combo.name}})},{title:"卡时长",key:"type",width:80,align:"center",render:(e,t)=>e("span",{domProps:{innerHTML:this.long(t.row.combo.timelong)}})},{title:"充值卡",key:"password",width:280,align:"center",render:(e,t)=>e("span",{domProps:{innerHTML:""!==t.row.username||1==t.row.isopen?t.row.password:"<s>"+t.row.password+"</s>"}})},{title:"使用会员",key:"username",width:150,align:"center",render:(e,t)=>e("span",{domProps:{innerHTML:""==t.row.username?"-":t.row.username}})},{title:"生成时间",key:"created_at",width:200,align:"center"},{title:"使用时间",key:"deleted_at",width:200,align:"center",render:(e,t)=>e("span",{domProps:{innerHTML:t.row.updated_at==t.row.created_at?"-":t.row.updated_at}})},{title:"状态",key:"status",width:80,align:"center",fixed:"right",render:(e,t)=>e("span",{domProps:{innerHTML:this.status(t.row.isopen,t.row.status)}})},{title:"操作",key:"code",align:"center",width:100,fixed:"right",render:(e,t)=>e("div",[e("Button",{props:{type:"text",size:"small"},class:"copy",on:{click:()=>{this.copy(t.row.password)}}},"复制卡密")])}]}}},E={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"txt"},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("\n            卡密列表\n        ")]),e._v(" "),a("Button",{attrs:{slot:"extra",type:"text",to:"code"},slot:"extra"},[a("Icon",{attrs:{type:"ios-loop-strong"}}),e._v("\n            关闭窗口\n        ")],1),e._v(" "),a("Form",{staticStyle:{"margin-top":"20px"},attrs:{inline:""}},[a("FormItem",{staticStyle:{width:"300px"},attrs:{prop:"code"}},[a("Input",{attrs:{type:"text",placeholder:"请输入您要导出的数量",clearable:""},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1),e._v(" "),a("FormItem",[a("Button",{on:{click:function(t){e.search()}}},[e._v("输出数量")])],1)],1),e._v(" "),a("ul",e._l(e.codedata,function(t,o){return a("li",[a("span",[e._v(e._s(t.password))])])}))],1),e._v(" "),a("Modal",{attrs:{title:"生成卡密",loading:e.loading,width:"480","footer-hide":""},model:{value:e.codeModal,callback:function(t){e.codeModal=t},expression:"codeModal"}},[a("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"选择套餐"}},[a("Select",{attrs:{filterable:""},model:{value:e.formValidate.comboId,callback:function(t){e.$set(e.formValidate,"comboId",t)},expression:"formValidate.comboId"}},e._l(e.combolist,function(t){return 1==t.isopen?a("Option",{key:t.id,ref:"price",refInFor:!0,attrs:{value:t.id}},[e._v(e._s(t.name)+" (零售价:"+e._s(t.price)+"元)")]):e._e()}))],1),e._v(" "),a("FormItem",{attrs:{label:"生成数量",prop:"number"}},[a("Input",{attrs:{placeholder:"请输入您要生成的充值卡数量"},model:{value:e.formValidate.number,callback:function(t){e.$set(e.formValidate,"number",t)},expression:"formValidate.number"}})],1),e._v(" "),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleSubmit("formValidate")}}},[e._v("确认生成")]),e._v(" "),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){e.handleReset("formValidate")}}},[e._v("重新填写")])],1)],1)],1)],1)},staticRenderFns:[]};var j=a("C7Lr")(A,E,!1,function(e){a("duNb")},null,null).exports,O={data:()=>({formValidate:{id:"",service:"",qq:"",buy_link:"",announce:"",enabled:!0},ruleValidate:{service:[{required:!0,message:"请填写网站使用教程链接地址！",trigger:"blur"}],qq:[{required:!0,message:"请填写在线客服QQ代码！",trigger:"blur"}],buy_link:[{required:!0,message:"请填写您的充值卡购买链接！",trigger:"blur"}]}}),mounted(){this.getsystem()},methods:{getsystem(){let e=this;e.axios.get("/setting/sysinfo",{}).then(function(t){let a=t.data;0==a.code&&(e.formValidate.id=a.data.id,e.formValidate.service=a.data.service,e.formValidate.qq=a.data.qq,e.formValidate.buy_link=a.data.buy_link,e.formValidate.announce=a.data.announce)}).catch(function(e){})},setting(){let e=this;e.axios.post("/setting/system",{id:e.formValidate.id,service:e.formValidate.service,qq:e.formValidate.qq,buy_link:e.formValidate.buy_link,announce:e.formValidate.announce}).then(function(t){let a=t.data;0==a.code&&(e.webModal=!1,e.getsystem(),e.formValidate.enabled=!0,e.$Message.success(a.message))}).catch(function(e){})},handleSubmit(e){this.$refs[e].validate(e=>{e&&this.setting()})},handleReset(e){this.formValidate.enabled=!1}}},Q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Card",{staticClass:"setting animated"},[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("\n        系统设置\n    ")]),e._v(" "),a("Row",[a("Col",{attrs:{span:20}},[a("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":100}},[a("FormItem",{attrs:{label:"在线客服",prop:"qq"}},[a("Input",{attrs:{placeholder:"请填写你的QQ在线代码",disabled:e.formValidate.enabled},model:{value:e.formValidate.qq,callback:function(t){e.$set(e.formValidate,"qq",t)},expression:"formValidate.qq"}})],1),e._v(" "),a("FormItem",{attrs:{label:"购买链接",prop:"buy_link"}},[a("Input",{attrs:{disabled:e.formValidate.enabled,placeholder:"请输入您的淘宝购买链接地址"},model:{value:e.formValidate.buy_link,callback:function(t){e.$set(e.formValidate,"buy_link",t)},expression:"formValidate.buy_link"}})],1),e._v(" "),a("FormItem",{attrs:{label:"使用教程",prop:"service"}},[a("Input",{attrs:{disabled:e.formValidate.enabled,placeholder:"请输入您的教程链接地址"},model:{value:e.formValidate.service,callback:function(t){e.$set(e.formValidate,"service",t)},expression:"formValidate.service"}})],1),e._v(" "),a("FormItem",{attrs:{label:"网站公告"}},[a("Input",{attrs:{type:"textarea",placeholder:"请输入网站公告内容...",autosize:{minRows:3,maxRows:5},disabled:e.formValidate.enabled},model:{value:e.formValidate.announce,callback:function(t){e.$set(e.formValidate,"announce",t)},expression:"formValidate.announce"}})],1),e._v(" "),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleSubmit("formValidate")}}},[e._v("确认提交")]),e._v(" "),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){e.handleReset("formValidate")}}},[e._v("重新编辑")])],1)],1)],1)],1)],1)},staticRenderFns:[]},J=a("C7Lr")(O,Q,!1,null,null,null).exports,K={data:()=>({}),mounted(){this.go()},methods:{go(e){let t=this;t.$Message.error("页面错误，即将返回首页！"),setTimeout(function(){t.$router.push({path:"/"})},1500)}}},D={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"error"})},staticRenderFns:[]};var G=a("C7Lr")(K,D,!1,function(e){a("d2PJ")},null,null).exports;o.default.use(d.a);var U=new d.a({routes:[{path:"/",component:g,redirect:"/dashboard",children:[{path:"/dashboard",name:"dashboard",component:_},{path:"/member",name:"member",component:C},{path:"/code",name:"code",component:T},{path:"/money",name:"money",component:N},{path:"/vip",name:"vip",component:V},{path:"/setting",name:"setting",component:J}]},{path:"/mobile",name:"mobile",component:R},{path:"/login",name:"login",component:b},{path:"/txt",name:"txt",component:j},{path:"*",name:"404",component:G}]}),X=(a("KPKd"),a("zRM5")),W=a.n(X);a("qFup"),a("0nQ+");o.default.use(W.a),l.a.defaults.baseURL="/api",l.a.interceptors.request.use(e=>{let t=JSON.parse(sessionStorage.getItem("token"));return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),l.a.interceptors.response.use(e=>(99999==e.data.code&&(sessionStorage.removeItem("userInfo"),sessionStorage.removeItem("token"),U.replace({path:"login",query:{redirect:U.currentRoute.fullPath}})),e),e=>{if(e.response)switch(e.response.status){case 400:sessionStorage.removeItem("userInfo"),sessionStorage.removeItem("token"),U.replace({path:"login",query:{redirect:U.currentRoute.fullPath}});case 401:sessionStorage.removeItem("userInfo"),sessionStorage.removeItem("token"),U.replace({path:"login",query:{redirect:U.currentRoute.fullPath}});case 402:sessionStorage.removeItem("userInfo"),sessionStorage.removeItem("token"),U.replace({path:"login",query:{redirect:U.currentRoute.fullPath}})}return Promise.reject(e.response.data)}),o.default.prototype.axios=l.a,o.default.config.productionTip=!1,l.a.defaults.withCredentials=!0,new o.default({el:"#app",router:U,components:{App:r},template:"<App/>"})},NsHS:function(e,t){},OxVs:function(e,t){},d2PJ:function(e,t){},duNb:function(e,t){},j7PF:function(e,t){},p76e:function(e,t){},qFup:function(e,t){},zj8O:function(e,t){}},["NHnr"]);